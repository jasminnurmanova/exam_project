{% extends 'base.html' %}

{% block title %}Products{% endblock %}

{% block content %}
<h1>Products</h1>

<!-- Форма поиска -->
<form method="get">
    <input type="text" name="q" placeholder="Search products..." value="{{ query }}">
    <button type="submit">Search</button>
</form>

<!-- Список продуктов -->
{% if products %}
    {% for p in products %}
        <div style="border:1px solid #ccc; padding:10px; margin-bottom:10px;">
            {% if p.image %}
                <img src="{{ p.image.url }}" alt="{{ p.name }}" style="max-width:150px; max-height:150px;">
            {% endif %}
            <p>
                <a href="{% url 'detail' p.pk %}">{{ p.name }}</a> — {{ p.price }}
            </p>
        </div>
    {% endfor %}
{% else %}
    <p>No products found.</p>
{% endif %}

<hr>

<h2>Categories</h2>
<ul>
    {% for c in categories %}
        <li>
            <a href="{% url 'category_detail' c.pk %}">{{ c.name }}</a>
        </li>
    {% endfor %}
</ul>

{% endblock %}
